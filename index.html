<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8"/>
        <title>Mibi&rsquo;s Website</title>
        <link href="icon.png" rel="icon" type="image/png">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script type="text/javascript" src="index.js"></script>
    </head>
    <header class="bar" id="bar">
        <a href="index.html" style="all: inherit">
            <img class="logo" width=60px height=60px src="icon.png"/>
            <h1 id="title">Mibi&rsquo;s Website</h1>
        </a>
        <button onclick="topFunction();" id="up_button" title="Go to top">
            ^
        </button>
    </header>
    <body onload="easterEgg();">
        <div class="group">
            


<h1>Welcome to my web page!</h1>



<p >Hello! I mostly code in C (or in
Java to make GUIs). I rarely fully finish my projects, but I
regularly reopen them to improve them further and maybe at
some point I&rsquo;ll have finished a currently unfinished
project XD.</p>
        </div>
        <div class="group">
            <h1>Articles</h1>
            <div id="article-list">
                <a href="all/good-cable-management.html">Good cable management isn&rsquo;t optional (or is it?)</a></br><a href="all/static-blog.html">Making my website statically generated</a></br><a href="all/mpy-mega2560.html">Trying to port Micropython to Mega 2560 clones</a></br><a href="all/3d-python.html">Simple 3D rendering in Python</a></br>
            </div>
        </div>
        

<div class="group">
    
<h1>My youtube channel</h1>



<p >Watch my videos
<a href="https://www.youtube.com/@mibi88-code">here</a>.</p>
</div>
<div class="group">
    
<h1>Games</h1>




<p ><a href="https://github.com/mibi88/ld58">Garbage collector's minion (Ludum Dare 58 jam)</a>
A small game where you are an allocator and the garbage
collector asks you to perform some tasks.
<a href="https://mibi88.itch.io/garbage-collectors-minion">itch.io</a>).</p>

<p >bootris A small 510 bytes (+2
byte magic number to make it bootable) clone of the famous
video game with falling tetrominos written in 16bit real
mode x86 assembly (unfinished, having some trouble to fit
more code in it).</p>


<p ><a href="https://github.com/mibi88/mushroom_champ/">mushroom_champ</a>
A small game for the NES where one farms giant mushrooms
(unfinished).</p>


<p ><a href="https://github.com/mibi88/ld57">GOLD HUNGER (Ludum Dare 57 jam)</a>
A small game made with
<a href="https://github.com/mibi88/MibiEngine2/">MibiEngine2</a>
where you need to eat some minerals as fast as possible or
you starve (play it on
<a href="https://mibi88.itch.io/gold-hunger">itch.io</a>).</p>

<p >Tangris A game for the NES
similar to the well known game with falling tetrominos, but
with tangram pieces instead :D, written in assembly (not
finished yet).</p>

<p >Lifeless A small puzzling
platformer for the NES (not finished yet).</p>


<p ><a href="https://github.com/mibi88/ld56">Antwars (Ludum Dare 56 compo)</a>
A small strategy game. (play it on
<a href="https://mibi88.itch.io/antwars">itch.io</a>).</p>


<p ><a href="https://github.com/mibi88/simple_raycaster">Simple raycaster</a>
A very fast raycaster.</p>


<p ><a href="https://github.com/mibi88/ld55">The seven crystals (Ludum Dare 55 jam)</a>
A dungeon exploration game where you fight mobs in
procedurally generated dungeons. (play it on
<a href="https://mibi88.itch.io/the-seven-crystals">itch.io</a>)</p>

<p >Solitude A small platformer for
the NES (not finished yet).</p>


<p ><a href="https://github.com/mibi88/dino_nes">Dino NES</a>
A dino game for the NES. (play it on
<a href="https://mibi88.itch.io/dino-nes">itch.io</a>)</p>


<p ><a href="https://github.com/mibi88/MibiCraft">MibiCraft</a>
A small sandbox building game (not finished at all).</p>


<p ><a href="https://github.com/mibi88/MossyDungeon">MossyDungeon</a>
A speedrunning platformer where the floor breaks after some
time. (play it on
<a href="https://mibi88.itch.io/mossydungeons">itch.io</a>)</p>


<p ><a href="https://github.com/mibi88/BREAKMOLE">BREAKMOLE</a>
Whac-A-Mole + BREAKOUT for a twice as fun experience! (play
it on
<a href="https://mibi88.itch.io/breakmole">itch.io</a>)</p>


<p ><a href="https://github.com/mibi88/MibiFlightSimulator">MibiFlightSimulator</a>
A small unrealistic flight simulator.</p>


<p ><a href="https://github.com/mibi88/CalcRace">CalcRace</a>
A small game to get better in mental calculation!</p>


<p ><a href="https://github.com/mibi88/neslib_ship_battle">Neslib ship battle</a>
One of my first video games! It&rsquo;s the first real
program I wrote in C (the code is awful)</p>
</div>
<div class="group">
    
<h1>Tools</h1>




<p ><a href="https://github.com/mibi88/spinnyutils">spinnyutils</a>
Small scripts to dump CDs and DVDs.</p>


<p ><a href="https://github.com/mibi88/PhosphorEngine/">PhosphorEngine</a>
A small text adventure engine for the web powered by a very
small RISC-V VM written in JavaScript. <br>
I made it originally for the js13k 2025 jam, but
didn&rsquo;t finish it in time.</p>


<p ><a href="https://github.com/mibi88/MibiEngineN/">MibiEngineN</a>
A small engine (more a template) for the NES using the NROM
mapper (unfinished).</p>


<p ><a href="https://github.com/mibi88/MibiNES/">MibiNES</a>
A small cycle-accurate NES emulator.</p>


<p ><a href="https://github.com/mibi88/nes_opcode_tester/">nes_opcode_tester</a>
A small utility to test the behavior of opcodes on the NES.
It currently only supports testing immediate addressing mode
opcodes.</p>


<p ><a href="https://github.com/mibi88/zipgit/">zipgit</a>
Some shell scripts to create a git repository from ZIP
archives.</p>


<p ><a href="https://github.com/mibi88/MibiEngine2/">MibiEngine2</a>
My new game engine (if it can even be called a game engine)
that uses OpenGL ES (but will be able to support other
rendering APIs) and has very few dependencies.</p>


<p ><a href="https://github.com/mibi88/HexSpy">HexSpy</a>
A native hex editor for the Haiku operating system written
in C++ (not finished yet and requires a lot of
refactoring).</p>


<p ><a href="https://github.com/mibi88/html_nes_asm">HTML NES asm</a>
A small assembler to compile 6502 assembly into NES roms
directly in a web brower (try it
<a href="https://mibi88.github.io/html_nes_asm/">here</a>).</p>


<p ><a href="https://github.com/mibi88/lizylang">lizylang</a>
A lisp dialect with lazy evaluation (not fully working
yet).</p>


<p ><a href="https://github.com/mibi88/md2bb">md2bb</a>
A markdown to BBCode converter (unfinished).</p>


<p ><a href="https://github.com/mibi88/MibiNESTools">MibiNESTools</a>
An IDE to make NES games.</p>


<p ><a href="https://github.com/mibi88/MibiEngine">MibiEngine</a>
A small game engine to code games in C for 20 year old
computers. (not finished yet). <br>
I recently created a repo from it, from all the zip archives
I made while coding it, which made me create the zipgit
scripts.</p>


<p ><a href="https://github.com/mibi88/MibiMdEditor">MibiMdEditor</a>
A Markdown editor using GTK4 written in Vala.</p>
</div>
<div class="group">
    
<h1>Libraries</h1>



<p >delay A small retained mode GUI
layout library and GUI toolkit (in a very early state).</p>


<p ><a href="https://github.com/mibi88/liburt">liburt</a>
A small highly portable drop-in replacement for libgcc or
compiler-rt (unfinished). <br>
I started making it for PhosphorEngine, because I
didn&rsquo;t managed to get libgcc compiled for RV32I.</p>


<p ><a href="https://github.com/mibi88/Mibitype/">Mibitype</a>
A font loading and rendering library (in a very early
state).</p>


<p ><a href="https://git.planet-casio.com/mibi88/tinytiled">tinytiled</a>
A small library to load tiled maps in python.</p>
</div>
<div class="group">
    
<h1>CASIO calculator stuff</h1>




<p ><a href="https://git.planet-casio.com/mibi88/fxpyedit">FxPyEdit</a>
A small python script editor for the Graph 35+e II
calculators, which is meant to be better than the included
editor.</p>


<p ><a href="https://git.planet-casio.com/mibi88/reality_proto2">Une r&eacute;alit&eacute; trop belle pour rester (prototype 2)</a>
A small platformer with realistic physics in a non euclidian
world (that I haven&rsquo;t implemented yet), which I
haven&rsquo;t finished.</p>


<p ><a href="https://git.planet-casio.com/mibi88/racer3d">Racer 3D</a>
A small wireframe game that uses my custom library,
libMicrofx.</p>


<p ><a href="https://git.planet-casio.com/mibi88/libMicrofx">libMicrofx</a>
A small library that uses syscalls, which makes creation of
really small add-ins easier.</p>


<p ><a href="https://git.planet-casio.com/mibi88/what_casiont">What CASIOn't</a>
A small demo.</p>


<p ><a href="https://git.planet-casio.com/Slyvtt/Collab_RPG">Collab RPG</a>
A RPG I contributed a lot to.</p>


<p ><a href="https://git.planet-casio.com/mibi88/libSCII">libSCII</a>
A small library to make RPGs (with ASCII art in a CLI) in
python.</p>


<p ><a href="https://git.planet-casio.com/mibi88/Builder">Builder</a>
A small Terraria/Minecraft in 2D clone, with atrocious code
and horrible physics.</p>
</div>
<div class="group">
    
<h1>Random stuff</h1>




<p ><a href="https://github.com/mibi88/3d_pyxel">3D Pyxel demo</a>
Some very basic 3D. This small demo was made in ca. 6h
without searching anything on the internet (but I fixed some
bugs since, by searching the correct formulas online).</p>


<p ><a href="https://github.com/mibi88/limg">limg</a>
My image format that uses RGB565 colors (but it has no
compression).</p>
</div>
        <div class="group">
            <h1>Recent articles</h1>
            

<div class="article">

<h1 align="center">Good cable management isn&rsquo;t optional (or is it?)</h1>




<p align="center" style="margin-top: 1em"><i>Mibi88</i></p>

<p align="center" style="margin-top: 1em"><i>Tue, 11 Nov
2025</i></p>

<p style="margin-top: 1em">My PC&rsquo;s cable management
was until recently really messy. When rendering the
time-lapse of my participation at the 58th Ludum Dare, I
decided to tackle this issue as my computer was really
noisy, which made the long hours of encoding a
3000&times;1920 video very painful, especially as it
hadn&rsquo;t finished before I wanted to go to bed. The
issue was that my computer was vibrating a lot, which
produced a lot of noise as it sits on my desk.</p>

<p style="margin-top: 1em">So I wired things nicely, except
the EPS cable as it was too short, it still had to uglily
run over the whole motherboard. I hadn&rsquo;t connected my
old hard drives back as I rarely use them, and the thermals
had improved, even if I&rsquo;d noticed that I had mounted
my CPU&rsquo;s cooler the wrong way around after having
repasted it a while ago. Seeing this huge improvement I
bought some fancy new individually sleeved cables from
Corsair, as it&rsquo;s my PSU&rsquo;s brand, to have a
longer EPS cable, an easier to bend ATX cable (actually it
became really painful to let the new cable correctly on the
back of the case while still being able to close it), and a
PCI cable without the little daisy-chaining dongle.</p>

<p style="margin-top: 1em">Once I had finally managed to
close the case and all the cables were wired nicely, I
booted my computer&nbsp;... and was very disappointed that
it was noisy, as I had tested it before being fully done and
everything was quite quiet, and the thermals were good as
well. So I quickly noticed that before, I hadn&rsquo;t
connected the hard drives, and I found out that one of my
hard drives was vibrating a lot. So I took it out of the
computer and noticed that it was only held by a single
screw&mdash;I really don&rsquo;t know what I had thought
when I had screwed it down with a single, with a unique
screw! I added 3 more, but it was still vibrating a lot. The
weird thing being, that the other one, which is older, is
completely fine. I haven&rsquo;t investigated it that much
more. I didn&rsquo;t know before that hard drives spin even
if they aren&rsquo;t mounted! So I tried to set a timeout
after which they spin down, but it didn&rsquo;t work, so I
just disconnected them, as I rarely need them, and now
everything is fine.</p>

<p style="margin-top: 1em">So actually I don&rsquo;t really
know how useful good cable management is (lol). A positive
aspect is that my computer now runs a little cooler, after I
repasted my CPU to put the cooler the right way
around&mdash;what a dumb mistake!&mdash;and flipped my PSU
upside-down, as I can mount it both ways around. I had let
it take air in from the inside of the computer case before,
which probably wasn&rsquo;t a good idea, so I mounted it so
that it takes the air in from under the computer, which
should keep it cooler.</p>

<p style="margin-top: 1em">At least now it looks nicer, and
it probably helped a little as I&rsquo;d seen with my first
try at improving the cable management, to keep it a little
cooler.</p></div>
<div class="article">

<h1 align="center">Making my website statically generated</h1>




<p align="center" style="margin-top: 1em"><i>Mibi88</i></p>


<p align="center" style="margin-top: 1em"><i>08/11/2025</i></p>

<p style="margin-top: 1em">GitHub Pages imposes a big
restriction on how pages can behave as they need to be
static, which can be quite inconvenient. To make my website
easier to modify I was using some JS to load the articles in
the main page. However, it was therefore limiting it to
browsers supporting&nbsp;/&nbsp;with JS enabled, and it
isn&rsquo;t very scalable, as when there will be more and
more articles, the website will have more and more articles
to fetch and display. it was also quite annoying to write
new articles or just update the project list as I had to
write HTML, and I have an obsession of wrapping my code on
80 columns :D (actually 79) which doesn&rsquo;t work very
well when writing HTML.</p>

<p style="margin-top: 1em">That&rsquo;s why I wanted to
generate my website statically with a script. I wanted to
write an article about how I struggled trying to fix my
computer&rsquo;s cable management, but I decided to fix my
website first. Originally I wanted to use python and
something else like markdown, but finally I used bash, sed
and groff (it&rsquo;s a bit cooler :D). I&rsquo;m also
calling LyX to convert the older articles. My script is
still a bit messy, but it works nicely. It loads the lists
of articles and &ldquo;projects&rdquo; (the sections where
all my projects are listed by category, e.g.,
&ldquo;Games&rdquo; or &ldquo;Libraries&rdquo;, I
don&rsquo;t really know how to call them), where the paths
and the IDs (for articles) or the titles (for
&ldquo;projects&rdquo;) are separated by semicolons. The
most recent articles are listed first. My script then walks
through these lists and generates the HTML code with the
appropriate tool. Then I use sed a bunch to remove all the
superfluous HTML that would make the generated HTML invalid
(when viewing the source code via Firefox, it seems to be
unhappy with the header and footer, but that&rsquo;s because
my template HTML code itself is incorrect&mdash;I&rsquo;m
not writing HTML very often&mdash;and I didn&rsquo;t know
that &lt;header&gt; and &lt;footer&gt; must be inside
&lt;body&gt;). Then I use sed again to replace
{&lt;name&gt;} tags with the appropriate generated HTML,
such as {article_list} which gets replaced with a list of
links to all the articles. I should run sed over the
articles and &ldquo;projects&rdquo; as well to replace curly
braces with an escape sequence to avoid such tags to get
replaced in the articles&rsquo; content, but I&rsquo;ll fix
that later. I&rsquo;m also generating PDFs of the articles
because I can (lol), but I don&rsquo;t include them in the
git repo. I&rsquo;ve already an idea of a little Easter egg
that I could add with a little bit of JS, but I&rsquo;ll do
it later.</p>

<p style="margin-top: 1em">So that&rsquo;s how I statically
generate my website without using a premade solution. In the
end it took me way longer than I expected, but it was quite
fun! roff is fascinating, maybe I&rsquo;ll code my own
implementation of it at some point....</p></div>
<div class="article"><style>
/* Layout-provided Styles */
h1.title {
font-size: x-large;
margin-bottom: 1ex;
text-align: center;

}
div.author {
font-size: large;
margin-top: 1.3ex;
margin-bottom: 0.7ex;
text-align: center;

}
div.date {
font-size: large;
margin-top: 0.9ex;
margin-bottom: 0.5ex;
text-align: center;

}
div.standard {
	margin-bottom: 2ex;
}
div.plain_layout {
text-align: left;

}
pre.verbatim {
font-family: monospace;
margin-top: 0.7ex;
margin-bottom: 0.7ex;
text-align: left;

}
span.flex_url {
font-family: monospace;
}


</style>
<h1 class='title' id='magicparlabel-1'>Trying to port Micropython to Mega 2560 clones</h1>
<div class='author' id='magicparlabel-2'><span style='font-variant:small-caps;'>Mibi88</span></div>
<div class='date' id='magicparlabel-3'>03/10/2025</div>
<div class='standard' id='magicparlabel-4'>I just quickly wrote this article, so it is quite messy, and my English is not so good, so&#x2026; sorry for that.</div>

<div class='standard' id='magicparlabel-5'>I had finished all the exercises very quickly in NSI class, so the teacher asked us, who had finished early, if we could try getting micropython working on mega 2560 clones to help him. I searched on the internet, and found that there was no port, and that it had really low specs. Later, when at home I was curious if I could make a port of micropython to it, as I knew it was easy from contributing to PythonExtra and it might be fun. I quickly set up a fedora VM to install all the AVR tools in (I don&#8217;t want to pollute my PC which such a useless toolchain as I have no such boards myself). I cloned the master branch and copy-pasted all the sample code at <span class='flex_url'>https://docs.micropython.org/en/latest/develop/porting.html</span>. It compiled and I was able to run the build/firmware.elf file in a terminal. Now I needed to get it to build for the microcontroller. I added</div>
<pre class='verbatim'>
CROSS_COMPILE&#160;?=&#160;avr-
</pre>
<div class='standard' id='magicparlabel-11'>to the makefile and started fixing errors. I had to change</div>
<pre class='verbatim'>
typedef&#160;intptr_t&#160;mp_int_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size
typedef&#160;uintptr_t&#160;mp_uint_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size
</pre>
<div class='standard' id='magicparlabel-14'>to</div>
<pre class='verbatim'>
typedef&#160;long&#160;long&#160;mp_int_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size
typedef&#160;unsigned&#160;long&#160;long&#160;mp_uint_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size
</pre>
<div class='standard' id='magicparlabel-17'>in mpconfigport.h, because of a <span style='font-family:monospace;'>MP_STATIC_ASSERT</span> that checks if <span style='font-family:monospace;'>sizeof(mp_int_t) == sizeof(long long)</span>, I don&#8217;t understand why, this is incoherent with what the doc says by saying that <span style='font-family:monospace;'>mp_int_t</span> &#8220;must be pointer size&#8221;, but whatever&#x2026;</div>

<div class='standard' id='magicparlabel-18'>Next I had to fix some issues with the libc and libm, as they lack some functions for some reason. It was quickly solved with some hacks.</div>

<div class='standard' id='magicparlabel-19'>Here are the messy things I had to do in mpconfigport.h</div>
<pre class='verbatim'>
//&#160;HACK:&#160;Awful&#160;hacks&#160;with&#160;the&#160;types
typedef&#160;long&#160;long&#160;mp_int_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size
typedef&#160;unsigned&#160;long&#160;long&#160;mp_uint_t;&#160;//&#160;must&#160;be&#160;pointer&#160;size

typedef&#160;long&#160;mp_off_t;
typedef&#160;long&#160;ssize_t;

//&#160;HACK:&#160;Really&#160;awful&#160;hack&#160;to&#160;get&#160;things&#160;compiling
#include&#160;&lt;math.h&gt;
#undef&#160;nanf
float&#160;__nanf(const&#160;char&#160;*tagp);
#define&#160;nanf&#160;__nanf
float&#160;__nearbyintf(float&#160;n);
#define&#160;nearbyintf&#160;__nearbyintf

//&#160;HACK:&#160;More&#160;awful&#160;hacks&#160;to&#160;get&#160;things&#160;compiling!
#define&#160;SEEK_SET&#160;0
#define&#160;SEEK_CUR&#160;1
#define&#160;SEK_END&#160;&#160;2

#define&#160;STDIN_FILENO&#160;&#160;&#160;&#160;0
#define&#160;STDOUT_FILENO&#160;&#160;&#160;1
#define&#160;STDERR_FILENO&#160;&#160;&#160;2

//&#160;NOTE:&#160;Actually&#160;IIRC&#160;those&#160;FE_*&#160;defines&#160;are&#160;useless
#define&#160;FE_DOWNWARD&#160;&#160;&#160;&#160;&#160;1
#define&#160;FE_TONEAREST&#160;&#160;&#160;&#160;2
#define&#160;FE_TOWARDZERO&#160;&#160;&#160;3
#define&#160;FE_UPWARD&#160;&#160;&#160;&#160;&#160;&#160;&#160;4
</pre>
<div class='standard' id='magicparlabel-49'>And here are my messy implementations of <span style='font-family:monospace;'>__nanf</span> and <span style='font-family:monospace;'>__nearbyintf</span> that I&#8217;ve just thrown in mphalport.c</div>
<pre class='verbatim'>
float&#160;__nanf(const&#160;char&#160;*tagp)&#160;{
&#160;&#160;&#160;&#160;return&#160;0;
}

float&#160;__nearbyintf(float&#160;n)&#160;{
&#160;&#160;&#160;&#160;return&#160;roundf(n);&#160;//&#160;It&#160;seems&#160;like&#160;mpy&#160;only&#160;uses&#160;it&#160;for&#160;rounding
}
</pre>
<div class='standard' id='magicparlabel-57'>I then added the following define to mpconfigport.h</div>
<pre class='verbatim'>
#define&#160;MICROPY_GCREGS_SETJMP&#160;(1)
</pre>
<div class='standard' id='magicparlabel-59'>By the way at some point I also found <span class='flex_url'>https://micropythpn.readthedocs.io/en/docs-chap1/develop/porting.html</span> at some point which was very helpful, because it listed a lot of flags. If I&#8217;m not mistaken at this point all the C code was compiling, but not linking yet: the <span style='font-family:monospace;'>.text</span> section was overflowing. I had commented <span style='font-family:monospace;'>CROSS_COMPILE ?= avr-</span> in the Makefile and it compiled and worked on Linux, so at least my quick and dirty hacks worked.</div>

<div class='standard' id='magicparlabel-64'>So I enabled LTO with <span style='font-family:monospace;'>-flto=auto</span> and added <span style='font-family:monospace;'>-mmcu=atmega2560</span> to use the correct linker script. The <span style='font-family:monospace;'>.text</span> section was still too full.</div>

<div class='standard' id='magicparlabel-65'>I then had to stop coding, and continue the next day: today.</div>

<div class='standard' id='magicparlabel-66'>I had some time this morning, so I tried the fix I had in mind: just adding <span style='font-family:monospace;'>-Oz</span> to the <span style='font-family:monospace;'>CFLAGS</span>. And it worked! &#x2026;but I was now facing another issue: <span style='font-family:monospace;'>.data</span> and <span style='font-family:monospace;'>.bss</span> were full. So I tried disabling more and more features, removing all the useless platform-dependant things micropython links by default for some reason, writing the <span style='font-family:monospace;'>OBJ</span> list by hand, only including what&#8217;s needed, but I didn&#8217;t got any of it working.</div>

<div class='standard' id='magicparlabel-67'>So I just give up, I don&#8217;t want to spend more time on this.</div>

<div class='standard' id='magicparlabel-68'>I hope all what I&#8217;ve written down in this article may help someone in the future, who also tries to port it to this board. If you want the code of my port attempt, please contact me. I won&#8217;t publish it publicly as it is a mess and I&#8217;ve done a lot of copy-paste from various places.</div></div>
<div class="article"><style>
/* Layout-provided Styles */
div.standard {
	margin-bottom: 2ex;
}
h1.title {
font-size: x-large;
margin-bottom: 1ex;
text-align: center;

}
div.author {
font-size: large;
margin-top: 1.3ex;
margin-bottom: 0.7ex;
text-align: center;

}
div.date {
font-size: large;
margin-top: 0.9ex;
margin-bottom: 0.5ex;
text-align: center;

}
h2.section_ {
font-weight: bold;
font-size: x-large;
margin-top: 1.3ex;
margin-bottom: 0.7ex;
text-align: left;

}
dl.description dt { font-weight: bold; }


</style>

<h1 class='title' id='magicparlabel-6'>Simple 3D rendering in Python</h1>
<div class='author' id='magicparlabel-7'><span style='font-variant:small-caps;'>Mibi88</span></div>
<div class='date' id='magicparlabel-8'>05/05/2025 - Updated on the 10/11/2025</div>
<div class='standard' id='magicparlabel-9'>Recently I participated at a challenge, where in an evening we had 6 hours to make a game in Python 3 with Pyxel (it sucks). I really wanted to make some 3D because it&#8217;s more impressive than a simple pixel art 2D game and I saw that Pyxel has a function to render colored triangles. It also means that I can&#8217;t have any depth buffer (and I don&#8217;t know the formula for perspective correct interpolation so I would not have been able to do 3D rendering with a depth buffer anyway). I just sorted the triangles by depth (by calculating the average of the depth of the three points, maybe there is a better way to do it, but I don&#8217;t know any) with some selection sort (maybe insertion sort may have been better, or maybe it isn&#8217;t because it doesn&#8217;t always take the same time so maybe the framerate would have been less consistent). Some formulas are also required to render 3D (I didn&#8217;t used matrices because I haven&#8217;t seen them at school yet: I&#8217;m still very young, and the little I know about them, because I use matrices in MibiEngine2 would not have been enough). So I used some formulas I found on the web a long time ago (it isn&#8217;t online anymore but it got archived by the Wayback Machine: <a href="https://web.archive.org/web/20220625104937/https://www.mfitzp.com/creating-a-3d-rotating-cube-with-micropython-and-oled-display/">https://web.archive.org/web/20220625104937/https://www.mfitzp.com/creating-a-3d-rotating-cube-with-micropython-and-oled-display/</a><i> EDIT: Actually it is still online, the URL has just changed: <a href="https://www.martinfitzpatrick.dev/creating-a-3d-rotating-cube-with-micropython-and-oled-display/">https://www.martinfitzpatrick.dev/creating-a-3d-rotating-cube-with-micropython-and-oled-display/</a></i>), but the formula for projection isn&#8217;t correct and I didn&#8217;t implemented one of the rotation formulas correctly: the rotation around the <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>y</mi>
</math>
 axis. I really hate AIs because they&#8217;re crawling forges so intensively and require a lot of energy, but ChatGPT was really helpful here to get the formulas I needed. I also found one of them on Wikipedia for projection. I&#8217;ll share the formulas here because I found them very hard to find, and I may not be the only one that finds them useful.</div>
<h2 class='section_' id='magicparlabel-10'>Rotation</h2>
<dl class='description'>
<dt class="description_label">Around&#xA0;the&#xA0;<math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>x</mi>
</math>
&#xA0;axis</dt>
<dd class="description_item" id='magicparlabel-11'> <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>y</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>y</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>&#x2212;</mo>
 <mi>z</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
 and <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>z</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>y</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>+</mo>
 <mi>z</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
. <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>x</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>x</mi>
</mrow>
</math>
 because we&#8217;re rotating around the <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>x</mi>
</math>
 axis</dd>
<dt class="description_label">Around&#xA0;the&#xA0;<math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>y</mi>
</math>
&#xA0;axis</dt>
<dd class="description_item" id='magicparlabel-12'> <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>z</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>z</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>&#x2212;</mo>
 <mi>x</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
 and <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>x</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>z</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>+</mo>
 <mi>x</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
. <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>y</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>y</mi>
</mrow>
</math>
 because we&#8217;re rotating around the <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>y</mi>
</math>
 axis</dd>
<dt class="description_label">Around&#xA0;the&#xA0;<math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>z</mi>
</math>
&#xA0;axis</dt>
<dd class="description_item" id='magicparlabel-13'> <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>x</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>x</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>&#x2212;</mo>
 <mi>y</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
 and <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>y</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>x</mi>
 <mo>&#x00D7;</mo>
 <mo>sin</mo>
 <mi>&#x3B8;</mi>
 <mo stretchy='false'>+</mo>
 <mi>y</mi>
 <mo>&#x00D7;</mo>
 <mo>cos</mo>
 <mi>&#x3B8;</mi>
</mrow>
</math>
. <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>z</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>z</mi>
</mrow>
</math>
 because we&#8217;re rotating around the <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>z</mi>
</math>
 axis</dd>
</dl>
<h2 class='section_' id='magicparlabel-14'>Projection</h2>
<div class='standard' id='magicparlabel-15'>One of the big advantages of using a projection matrix is having a near and a far plane, but I only knew a very approximate formula without it&#x2026; Today I fixed it. Here is the formula I&#8217;m using now:</div>

<div class='standard' id='magicparlabel-16'>First I calculate the focal length, to use the formula from Wikipedia (<a href="https://en.wikipedia.org/wiki/3D_projection#Diagram">https://en.wikipedia.org/wiki/3D_projection#Diagram</a>):</div>

<div class='standard' id='magicparlabel-17'><math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>f</mi>
 <mo stretchy='false'>=</mo>
 <mfrac>
  <mi>w</mi>
  <mrow>
   <mn>2</mn>
   <mo>&#x00D7;</mo>
   <mo>tan</mo>
   <mfrac>
    <mi>&#x3B8;</mi>
    <mn>2</mn>
   </mfrac>
  </mrow>
 </mfrac>
</mrow>
</math>
 with <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>&#x3B8;</mi>
</math>
 being the field of view (FOV for short) and <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>w</mi>
</math>
 the width of the viewport.</div>

<div class='standard' id='magicparlabel-18'><b>Note</b>: Pyxel doesn&#8217;t provide a <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mo>tan</mo>
</math>
 function so I just used <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mfrac>
 <mrow>
  <mo>sin</mo>
  <mi>&#x3B8;</mi>
 </mrow>
 <mrow>
  <mo>cos</mo>
  <mi>&#x3B8;</mi>
 </mrow>
</mfrac>
</math>
.</div>

<div class='standard' id='magicparlabel-19'>Then I applied Wikipedia&#8217;s formula to calculate the X and Y coordinates: <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>x</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>x</mi>
 <mo>&#x00D7;</mo>
 <mfrac>
  <mi>f</mi>
  <mi>z</mi>
 </mfrac>
</mrow>
</math>
 and <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mrow>
 <mi>y</mi>
 <mo stretchy='false'>'</mo>
 <mo stretchy='false'>=</mo>
 <mi>y</mi>
 <mo>&#x00D7;</mo>
 <mfrac>
  <mi>f</mi>
  <mi>z</mi>
 </mfrac>
</mrow>
</math>
.</div>

<div class='standard' id='magicparlabel-20'><b>Note</b>: make sure that <math xmlns='http://www.w3.org/1998/Math/MathML'>
<mi>z</mi>
</math>
 is non-zero, or you will get a <span style='font-family:monospace;'>ZeroDivisionError</span>.</div>
<h2 class='section_' id='magicparlabel-21'>Conclusion</h2>
<div class='standard' id='magicparlabel-22'>All those formulas are all you should need to render very basic 3D.</div>

<div class='standard' id='magicparlabel-23'>You can check the code of my little 3D demo here: <a href="https://github.com/mibi88/3d_pyxel/">https://github.com/mibi88/3d_pyxel/</a>.</div>

<div class='standard' id='magicparlabel-24'>I hope it can help you on your journey making a very basic software renderer :).</div>
<h2 class='section_' id='magicparlabel-25'><i>Edits from the 10/11/2025</i></h2>
<div class='standard' id='magicparlabel-26'><i>Fixed an orthography error, changed URLs to hyperlinks and added a link to the article&#8217;s new location.</i></div></div>
            <h1>All the articles</h1>
            <a href="all/good-cable-management.html">Good cable management isn&rsquo;t optional (or is it?)</a></br><a href="all/static-blog.html">Making my website statically generated</a></br><a href="all/mpy-mega2560.html">Trying to port Micropython to Mega 2560 clones</a></br><a href="all/3d-python.html">Simple 3D rendering in Python</a></br>
        </div>
    </body>
    <footer>
        (C) 2024&ndash;2025 Mibi88
    </footer>
</html>
